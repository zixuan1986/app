(function(e){function r(r){for(var n,i,o=r[0],c=r[1],v=r[2],u=0,d=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(r);while(d.length)d.shift()();return a.push.apply(a,v||[]),t()}function t(){for(var e,r=0;r<a.length;r++){for(var t=a[r],n=!0,o=1;o<t.length;o++){var c=t[o];0!==s[c]&&(n=!1)}n&&(a.splice(r--,1),e=i(i.s=t[0]))}return e}var n={},s={servers:0},a=[];function i(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=n,i.d=function(e,r,t){i.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,r){if(1&r&&(e=i(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)i.d(t,n,function(r){return e[r]}.bind(null,n));return t},i.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(r,"a",r),r},i.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},i.p="https://cdn.jsdelivr.net/gh/JX3BOX/app@gh-pages/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=r,o=o.slice();for(var v=0;v<o.length;v++)r(o[v]);var l=c;a.push([1,"chunk-vendors","chunk-common"]),t()})({1:function(e,r,t){e.exports=t("5bf5")},1736:function(e,r,t){"use strict";var n=t("decc"),s=t.n(n);s.a},"2d69":function(e,r,t){},"5bf5":function(e,r,t){"use strict";t.r(r);t("e260"),t("e6cf"),t("cca6"),t("a79d");var n=t("6a69"),s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"p-app-servers",attrs:{id:"app"}},[t("Header"),t("Breadcrumb",{attrs:{name:"开服监控",slug:"servers",root:"/app/servers"}},[t("svg",{class:"u-app-servers",attrs:{slot:"logo",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 60 60","svg-inline":"",role:"presentation",focusable:"false",tabindex:"-1"},slot:"logo"},[t("path",{attrs:{d:"M.835 22A4.512 4.512 0 000 24.608v11.783A4.613 4.613 0 004.608 41H29v8.101A5.016 5.016 0 0025.101 53H1a1 1 0 100 2h24.101c.465 2.279 2.484 4 4.899 4s4.434-1.721 4.899-4H59a1 1 0 100-2H34.899A5.016 5.016 0 0031 49.101V41h24.392A4.613 4.613 0 0060 36.392V24.608A4.51 4.51 0 0059.165 22H.835zM10.5 35C8.019 35 6 32.981 6 30.5S8.019 26 10.5 26s4.5 2.019 4.5 4.5-2.019 4.5-4.5 4.5zM33 54c0 1.654-1.346 3-3 3s-3-1.346-3-3 1.346-3 3-3 3 1.346 3 3zm1-24a1 1 0 110-2 1 1 0 010 2zm2 3a1 1 0 110-2 1 1 0 010 2zm2-3a1 1 0 110-2 1 1 0 010 2zm2 3a1 1 0 110-2 1 1 0 010 2zm2-3a1 1 0 110-2 1 1 0 010 2zm2 3a1 1 0 110-2 1 1 0 010 2zm2-3a1 1 0 110-2 1 1 0 010 2zm2 3a1 1 0 110-2 1 1 0 010 2zm2-3a1 1 0 110-2 1 1 0 010 2zm2 3a1 1 0 110-2 1 1 0 010 2zM55.392 1H4.608A4.613 4.613 0 000 5.608v11.783C0 18.365.314 19.26.835 20h58.329c.522-.74.836-1.635.836-2.608V5.608A4.613 4.613 0 0055.392 1zM10.5 16C8.019 16 6 13.981 6 11.5S8.019 7 10.5 7 15 9.019 15 11.5 12.981 16 10.5 16zM34 11a1 1 0 110-2 1 1 0 010 2zm2 3a1 1 0 110-2 1 1 0 010 2zm2-3a1 1 0 110-2 1 1 0 010 2zm2 3a1 1 0 110-2 1 1 0 010 2zm2-3a1 1 0 110-2 1 1 0 010 2zm2 3a1 1 0 110-2 1 1 0 010 2zm2-3a1 1 0 110-2 1 1 0 010 2zm2 3a1 1 0 110-2 1 1 0 010 2zm2-3a1 1 0 110-2 1 1 0 010 2zm2 3a1 1 0 110-2 1 1 0 010 2z"}})])]),t("LeftSidebar",[t("Nav")],1),t("Main",{attrs:{withoutRight:!1}},[t("div",{staticClass:"m-app-servers"},[t("el-row",{staticClass:"searchbar-wrapper",attrs:{gutter:10}},[t("el-col",{attrs:{xl:20,sm:17,xs:10}},[t("el-input",{staticClass:"input-with-select",attrs:{placeholder:"搜索服务器"},model:{value:e.searchServerName,callback:function(r){e.searchServerName=r},expression:"searchServerName"}})],1),t("el-col",{staticStyle:{"text-align":"center"},attrs:{xl:4,sm:7,xs:14}},[t("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","active-text":"只看主服","inactive-text":"所有服务器"},model:{value:e.isShowMainServer,callback:function(r){e.isShowMainServer=r},expression:"isShowMainServer"}})],1)],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.pinnedServerName.length>0&&e.serverList.length>0,expression:"\n                    pinnedServerName.length > 0 && serverList.length > 0\n                "}],staticClass:"server-wrapper server-group-pinned"},[e._l(e.serverList,(function(r,n){return[t("f-server-node",{directives:[{name:"show",rawName:"v-show",value:e.pinnedServerName.includes(r.serverName),expression:"\n                            pinnedServerName.includes(server.serverName)\n                        "}],key:n,attrs:{server:r,pinned:!0},on:{"toogle-server":e.clickServer}})]}))],2),t("div",{staticClass:"server-wrapper server-group-unpinned"},[e._l(e.serverList,(function(r,n){return[t("f-server-node",{directives:[{name:"show",rawName:"v-show",value:e.showUnpinnedServerCondition(r),expression:"showUnpinnedServerCondition(server)"}],key:n,attrs:{server:r,pinned:!1},on:{"toogle-server":e.clickServer}})]}))],2)],1),t("RightSidebar",[t("div",{staticClass:"m-app-servers-aside"})]),t("Footer")],1)],1)},a=[],i=(t("99af"),t("4de4"),t("caad"),t("c975"),t("a15b"),t("a434"),t("ac1f"),t("2532"),t("5319"),t("1276"),t("8f33"),t("216c")),o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"server-node",style:{width:e.width+"px","--leftVar":e.pseudoElementLeft,"--rightVar":e.pseudoElementRight}},[t("div",{staticClass:"button-wrapper"},[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.server.ipAddress+":"+e.server.ipPort,placement:"top","popper-class":"tooltip-ipaddress"}},[t("el-button",{staticClass:"server-button",class:{"server-online":e.server.connectState,"server-offline":!e.server.connectState,"server-pinned":e.pinned},staticStyle:{width:"100%"},attrs:{plain:""},on:{click:function(r){return e.$emit("toogle-server",e.server.serverName)}}},[e._v(" "+e._s(e.server.serverName)+" "),e.server.serverName===e.server.mainServer?t("span",{staticStyle:{color:"red"}},[e._v("[主]")]):e._e()])],1)],1),t("div",{staticClass:"text-wrapper"},[t("span",[e._v(e._s(e.server.zoneName)+" | "+e._s(e.server.mainServer))])])])},c=[],v=(t("a9e3"),{name:"FServerNode",components:{},props:{width:{type:Number,default:200},server:{type:Object,default:function(){return{connectState:!0,ipAddress:"120.92.176.35",ipPort:"3724",mainServer:"天鹅坪",serverName:"双剑合璧",zoneName:"双线一区"}}},pinned:{type:Boolean,default:!1}},data:function(){return{key:1}},computed:{pseudoElementLeft:function(){return this.server.serverName===this.server.mainServer?"calc((".concat(this.width,"px - ").concat(this.server.serverName.length+2,"em) / 4)"):"calc((".concat(this.width,"px - ").concat(this.server.serverName.length,"em) / 4)")},pseudoElementRight:function(){return"calc((3 * ".concat(this.width,"px + ").concat(this.server.serverName.length+2,"em) / 4 - 16px)")}},methods:{}}),l=v,u=(t("a33b"),t("1736"),t("2877")),d=Object(u["a"])(l,o,c,!1,null,"248c5324",null),p=d.exports,m=(t("b64b"),t("d3b7"),t("bc3a")),h=t.n(m);function f(e){return new Promise((function(r,t){var n=h.a.create({headers:{"Content-Type":"application/json",Accept:"application/json"},timeout:1e4});n(e).then((function(e){r(e.data)})).catch((function(e){console.log("axios错误："+e),t(e.response?e.response.data:{msg:e.message,code:-1})}))}))}function S(e,r,t,n,s,a){var i={url:""+e,method:r};return i["withCredentials"]=void 0!==t&&t,void 0!=n&&Object.keys(n).length>0&&(i["data"]=n),void 0!=s&&""!==s&&(i["headers"]=s),void 0!=a&&Object.keys(a).length>0&&(i["params"]=a),f(i)}var g=t("ee8f"),w={name:"Servers",data:function(){return{searchServerName:"",isShowMainServer:!0,serverList:[],pinnedServerName:[]}},computed:{},methods:{showUnpinnedServerCondition:function(e){var r=this.searchServerName.replace(/\ /g,""),t=""===r,n=-1!==e.serverName.indexOf(r),s=e.serverName===e.mainServer;return!this.pinnedServerName.includes(e.serverName)&&(!t&&n||t&&!this.isShowMainServer||t&&s)},clickServer:function(e){var r=$.inArray(e,this.pinnedServerName);-1===r?this.pinnedServerName.push(e):this.pinnedServerName.splice(r,1),this.setSavedServers()},loadAllServers:function(){var e=this,r=g["JX3BOX"].__spider+"jx3servers";S(r,"GET").then((function(r){if("success"===r.msg){var t=[],n=r.data.filter((function(e){return e.serverName===e.mainServer&&t.push(e),e.serverName!==e.mainServer}));e.serverList=t.concat(n)}})).catch((function(e){console.log(e)})).then((function(){}))},getUserId:function(){g["User"].isLogin()&&(this.uid=g["User"].getInfo().uid)},getSavedServers:function(){var e=this;this.uid?S(API,"GET",!0,{},{},{uid:this.uid,key:"jx3_servers"}).then((function(r){if(10050==r.code){r.data.value;r.data.value?e.pinnedServerName=r.data.value.split(","):e.pinnedServerName=[]}})).catch((function(r){switch(r.code){case-1:e.$message.error(r.data),e.getFromLocal();break;case 9999:e.$message.error("登录失效, 请重新登录"),g["User"].destroy(),setTimeout((function(){g["User"].toLogin()}),2e3);break;default:e.$message.error(r.msg),e.getFromLocal()}})).then((function(){})):this.getFromLocal()},getFromLocal:function(){if(window.localStorage){var e=localStorage.getItem("jx3_servers");e&&(this.pinnedServerName=e.split(","))}},setSavedServers:function(){var e=this;if(this.uid){var r=g["JX3BOX"].__server+"user/meta";S(r,"POST",!0,{uid:this.uid,key:"jx3_servers",value:this.pinnedServerName.join(",")}).then((function(e){e.code})).catch((function(r){switch(r.code){case-1:e.$message.error(r.data),e.setToLocal();break;case 9999:e.$message.error("登录失效, 请重新登录"),g["User"].destroy(),setTimeout((function(){g["User"].toLogin()}),2e3);break;default:e.$message.error(r.msg),e.setToLocal()}})).then((function(){}))}else this.setToLocal()},setToLocal:function(){if(window.localStorage){var e=this.pinnedServerName.join(",");localStorage.setItem("jx3_servers",e)}}},filters:{},mounted:function(){this.getUserId(),this.getSavedServers(),this.loadAllServers()},components:{Nav:i["a"],FServerNode:p}},b=w,N=(t("9de5"),Object(u["a"])(b,s,a,!1,null,null,null)),y=N.exports;Vue.config.productionTip=!1,Vue.use(n["a"]),new Vue({render:function(e){return e(y)}}).$mount("#app")},"9de5":function(e,r,t){"use strict";var n=t("a474"),s=t.n(n);s.a},a33b:function(e,r,t){"use strict";var n=t("2d69"),s=t.n(n);s.a},a474:function(e,r,t){},decc:function(e,r,t){}});
//# sourceMappingURL=servers.48df1d44.js.map